---
description: 스테이징된 변경사항으로 한국어 커밋 메시지를 생성하고 커밋 후 자동 푸시
---

# Git Commit with Korean Conventional Commits

스테이징된 변경사항을 분석하여 한국어 컨벤셔널 커밋 메시지를 생성하고, 커밋 후 원격 저장소로 푸시합니다.

## Step 1: 스테이징 확인

### 1.1 명령어 실행

다음 명령어를 실행하여 스테이징된 파일 목록을 확인하세요:

```bash
git diff --cached --name-only
```

### 1.2 출력 확인 및 조건 분기

위 명령어의 실행 결과를 확인하세요:

**조건 A: 출력이 비어있는 경우**
- 파일 경로가 하나도 출력되지 않음
- 출력이 완전히 비어있거나 공백/개행만 있음

→ 다음 메시지를 출력하고 **즉시 중단**합니다:
```
스테이징된 변경사항이 없습니다. 먼저 `git add <파일>`을 사용하여 파일을 스테이징해주세요.
```

**조건 B: 파일 경로가 하나 이상 출력되는 경우**

→ **Step 2로 진행**합니다.

## Step 2: 변경사항 분석

스테이징된 변경사항을 분석합니다:

```bash
git diff --cached --stat
git diff --cached
```

분석할 내용:
- 변경된 파일 수
- 변경 내용의 성격 (새 기능, 버그 수정, 리팩토링 등)
- 영향받는 모듈/컴포넌트

## Step 3: 커밋 메시지 생성

### 커밋 메시지 형식

```
타입(스코프): 주제

본문 (복잡한 변경사항인 경우에만)
```

### 타입 결정

| 타입 | 설명 |
|------|------|
| feat | 새로운 기능 추가 |
| fix | 버그 수정 |
| docs | 문서 변경 |
| style | 코드 스타일/포맷 변경 (기능 변경 없음) |
| refactor | 코드 리팩토링 |
| test | 테스트 추가/수정 |
| perf | 성능 개선 |
| build | 빌드 시스템/외부 의존성 변경 |
| ci | CI 설정 변경 |
| chore | 기타 자잘한 수정 |

### Header 규칙
- **50자 이내**로 제한
- **명령형**으로 작성 (예: "추가", "수정", "개선")
- **마침표 없음**
- **스코프는 선택사항** (생략 가능)
- **한글로 작성** (타입만 영문)

### Body 규칙 (선택)

다음 조건 중 하나라도 해당하면 Body 추가:
- 5개 이상 파일 변경
- 여러 모듈/컴포넌트 변경
- 새로운 API/인터페이스 추가
- 복잡한 로직 추가
- Breaking change

Body 작성 시:
- 각 행 **72자 이내**
- **무엇과 왜**를 설명 (어떻게가 아님)
- **한글로 작성**

### 예시

**Header만 (단순 변경):**
```
feat(인증): 소셜 로그인 버튼 추가
```

**Header + Body (복잡한 변경):**
```
feat(결제): 정기 결제 시스템 구현

월간, 연간 구독 모델을 지원합니다.
결제 실패 시 3회까지 자동 재시도하며,
카드 만료 30일 전 사용자에게 알림을 발송합니다.
```

## Step 4: 커밋 실행

생성된 메시지로 커밋합니다:

```bash
# Body 없는 경우
git commit -m "타입(스코프): 주제"

# Body 있는 경우
git commit -m "타입(스코프): 주제" -m "Body 내용..."
```

## Step 5: 자동 푸시

커밋 후 원격 저장소로 푸시합니다:

```bash
git push
```

### 에러 처리

**Push 실패 시:**
- 에러 메시지를 그대로 표시
- 재시도하지 않음
- 다음과 같은 해결책 제안:
  - "no upstream branch" → `git push -u origin <branch>` 제안
  - "rejected" → `git pull` 후 다시 시도 제안

## 출력 형식

### 성공 시:
```
✓ 커밋 생성 완료: <커밋 해시>
  <커밋 메시지>
✓ 원격 저장소로 푸시 완료
```

### 커밋 성공, 푸시 실패 시:
```
✓ 커밋 생성 완료: <커밋 해시>
  <커밋 메시지>
✗ 푸시 실패: <에러 메시지>
```

## 제약사항

1. **절대 포함하지 않음**: "Generated with Claude Code"
2. **절대 포함하지 않음**: "Co-Authored-By"
3. **자동 staging 금지**: `git add` 실행하지 않음
4. **한글 사용**: 타입을 제외한 모든 텍스트는 한글
